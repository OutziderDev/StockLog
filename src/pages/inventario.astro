---
import InventarioComponent from '@/components/Inventario/Inventario'
import AddIcon from '@/assets/icons/add.svg'
import Layout from '@/layouts/Layout.astro'
---
<Layout >
  <section class="container">
    <header class="section-Header">
      <h1 class="tittle">Inventario de Materiales</h1>
      <button class="" id="addProducto" aria-label="Agregar Producto"> <AddIcon/> Agregar Producto</button>
    </header>
    
    <InventarioComponent client:load/>

    <dialog id="dialogFormAdd" closedby="none">
      <h3>Formulario para Agregar un nuevo material</h3>
      <form action="POST" class="formdialog">
        <label for="nombre">Nombre del material:
          <input type="text" class="inputbase" name="nombre" id="nombre" placeholder="Bisagras de 3 x 1/2" required>
        </label>

        <label for="cantidad">Cantidad:
          <input type="number" class="inputbase" name="cantidad" id="cantidad" placeholder="100" required>
        </label>

        <label for="unidad">
          Unidad de medida:
          <input type="text" class="inputbase" name="unidad" id="unidad" placeholder="C/u, metros, caja..." required>
        </label>

        <label for="precio">
          Precio por unidad:
          <input type="number" class="inputbase" name="precio" id="precio" placeholder="1500" required>
        </label>

        <label for="categoria">Categoría:
          <select name="categoria" id="categoria" class="inputbase" required>
            <option value="" disabled selected>Selecciona una categoría</option>
            <option value="ferreteria">Ferretería</option>
            <option value="madera">Madera</option>
            <option value="pintura">Pintura</option>
            <option value="herramientas">Herramientas</option>
          </select>
        </label>
      </form>
      <div class="btngroup">
        <form>
          <button formmethod="dialog" style="background-color: red;">Cancelar</button>
        </form>
        <button type="submit">Guardar</button>
      </div>
    </dialog>

  </section>
</Layout>

<style>
  dialog{
    min-width: 40dvw;
    margin: auto;
    padding: 1.5rem;
    border-radius: 0.2rem;
    background-color: var(--color-morado-oscuro);
    border: 1px groove var(--color-naranja-claro);
    scrollbar-color: var(--color-morado-hover) var(--color-morado-oscuro);

    & > h3 {
      color: var(--color-crema);
      font-size: 1.5rem;
      text-align: center;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--color-crema);
    }

    & > .formdialog {
      margin-block: 1.5rem;
      display: flex;
      flex-direction: column;

      & > label {
        display: flex;
        flex-direction: column;
        color: white;
        font-weight: 600;
        color: var(--color-crema);
        gap: 0.5rem;
       }
    }

    & > .btngroup {
      display: flex;
      justify-content: space-around;

      & > form {
        width: min-content;
      }

      &  button {
        display:block;
        padding: 0.5rem 0.8rem;
        border-radius: 0.3rem;
        border:none;
        cursor:pointer;
        background-color: rgb(15, 183, 15);
        color: white;
        font-size: 1rem;
        font-weight: bolder;
        transition: all 0.2s ease;

        &:hover {
          mix-blend-mode: difference ;
        }

        &:active {
          transform: scale(0.9);
        }
      }
    }

    &::backdrop {
      background-color: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(3px);
    }
  }
</style>

<script>
  const btnAddProducto = document.querySelector('#addProducto') as HTMLButtonElement
  const dialog = document.querySelector('#dialogFormAdd') as HTMLDialogElement
  btnAddProducto?.addEventListener('click', () => {
    dialog?.showModal()
  })
</script>